<launch>
    # Define path arguments for the resources 
    <arg name="resources_path"              default="$(find haru_drums_game)/src"/>
    <arg name="voices_path"                 default="$(find idmind_tabletop)/resources/voice/"/>
    <arg name="voice"                       default="haruchild_cerewave"/>
    <arg name="default_language"            default="en-US"/>
    <arg name="play_audio"                  default="false"/>
    <arg name="file_out"                    default="/tmp/tts_audio.wav"/>

    # Define environment variables
    <env name="DRUMS_GAME_RESOURCES_PATH"   value="$(arg resources_path)"/>

    # Use the haruchild_cerewave
    <node pkg="idmind_tabletop" name="idmind_tabletop_tts_subscriber_node" type="idmind_tabletop_tts_subscriber_node" output="screen">
        <param name="voices_path"      type="string" value="$(arg voices_path)"/>
        <param name="voices"           type="string" value="$(arg voice).voice"/>
        <param name="license"          type="string" value="$(arg voices_path)/$(arg voice).lic"/>
        <param name="default_language" type="string" value="$(arg default_language)"/>
        <param name="play_audio"       type="bool"   value="$(arg play_audio)"/>
        <param name="file_out"         type="string" value="$(arg file_out)"/>
    </node>

    # Launch Behaviour Tree Node
    <node pkg="behavior_tree_ros" name="behavior_tree_ros_node" type="behavior_tree_ros_node" output="screen">
        <param name="trees_folder"         type="string" value="$(find behavior_tree_ros)/resources/trees"/>
        <param name="import_from_folder"   type="bool"   value="false"/>
        <param name="plugins_folder"       type="string" value="$(find behavior_tree_ros)/resources/plugins"/>
        <param name="tick_frequency"       type="double" value="30.0"/>
        <param name="enable_cout_log"      type="bool"   value="true"/>
        <param name="enable_minitrace_log" type="bool"   value="false"/>
        <param name="enable_file_log"      type="bool"   value="false"/>
        <param name="enable_zmq_log"       type="bool"   value="true"/>
        <param name="enable_rostopic_log"  type="bool"   value="true"/>
        <param name="log_folder"           type="string" value="/tmp/"/>
    </node>

    # Load the Tree using the load_service
    <node pkg="rosservice" type="rosservice" name="srv_caller_load_telegram_tree" 
                           args="call --wait /behavior_tree/load_tree 'tree_file: '$(find haru_drums_game)/trees/drums_game_tree.xml''"/>
</launch>